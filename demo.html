<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>demo</title>
    <style>
    html,body{
        margin: 0;
        padding: 0;
        font-size: 50px;
    }
    .videoBox{
        width: 100%;
        background-color: #000;
        position: fixed;
        top: 0;
        z-index: 9;
    }
    video{
        width: 100%;
        max-height: 50vh;
    }
    .playShade{
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fff;
        position: absolute;
        top: 0;
        background: rgba(0,0,0,0.50);
    }
    .playShade p{
        width: 100%;
        height: 1rem;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .playShade img{
        width: 1rem;
        height: 1rem;
        display: block;
    }
    </style>
</head>
<body>
    <div class="videoBox" id="app">
        <video
          id="J_prismPlayer"
          @click="touchVideo" 
          autoplay 
          :poster="poster" 
          :src="videoAddress" 
          :controls="false"
          x-webkit-airplay="true"
          x5-video-player-type="h5"
          x5-video-ignore-metadata="true"
          x5-video-orientation="landscape"
          webkit-playsinline playsinline></video>
          <!-- 播放暂停按钮 -->
          <div class="playShade" v-if="!showProgressBar&&playing!=2">
            <p><img :src="playing==1?'./playing.png':'./pause.png'" alt="" @click="playVideo()"></p>
          </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <script>
        var vm = new Vue({
            el:'#app',
            data:{
                paddingTop:'1.14rem',
                videoBoxzwH:'',
                firstPlay:true,
                fullScreenStatus:false,//是否全屏
                playing:1, //0为播放中 1位暂停中 2为播放完毕
                showProgressBar: false, //显示底部进度条
                progressBarW:0, //底部进度条进度
                sliderValue:0, //进度位置
                playTime:'',//播放时长
                arrowStatus:false, //是否收起
                showArrow:true, //是否显示折叠按钮
                player:null,//阿里播放器，暂时无用
                videoAddress:'',
                poster:''
                // poster:'https://gcv-app-test-cdn.geelycv.com/fc3a804c-9941-4272-a44d-f3ff27f718a8.png'
            },
            mounted(){
                this.playfun()
            },
            methods:{
                // 点击视频区域
                touchVideo(){
                    this.showProgressBar = !this.showProgressBar;
                    console.log(this.showProgressBar)
                    setTimeout(()=>{
                        if(!this.showProgressBar&&this.playing == 0){
                            this.showProgressBar = true
                        }
                    },3000)
                },
                // 播放视频
                playVideo(){
                    var elevideo = document.getElementById("J_prismPlayer");
                    if(this.playing==0){
                        elevideo.pause()
                    }else{
                        elevideo.play()
                    }
                },
                // 视频播放
                playfun(vid){
                    let that = this;
                    this.videoAddress = 'https://vd3.bdstatic.com/mda-jmi8zs8sj1ib9623/v1-cae/sc/mda-jmi8zs8sj1ib9623.mp4?v_from_s=hkapp-haokan-nanjing&auth_key=1648453589-0-0-a1a5bb6a832f105af5b518b898587a54&bcevod_channel=searchbox_feed&pd=1&cd=0&pt=3&logid=0989722525&vid=6707419055015291964&abtest=100815_1-101130_1-17451_2&klogid=0989722525'
                    var elevideo = document.getElementById("J_prismPlayer");
                    elevideo.addEventListener('loadedmetadata', function () {
                        setTimeout(()=>{
                            that.videoBoxzwH = document.getElementsByClassName("videoBox")[0].offsetHeight+'px'
                            window.scrollTo(0,0);
                            this.firstPlay = false;
                        },300)
                    })
                    elevideo.addEventListener('play', function () {
                        that.playing = 0;
                        that.showProgressBar = true;
                        that.videoBoxzwH = document.getElementsByClassName("videoBox")[0].offsetHeight+'px'
                        if(this.firstPlay){
                            window.scrollTo(0,0);
                            this.firstPlay = false;
                        }
                    });
                    elevideo.addEventListener('pause', function () {
                        that.playing = 1;
                        that.showProgressBar = false;
                    });
                    elevideo.addEventListener('ended', function () {
                        that.playing = 2;
                        that.showProgressBar = false;
                    });
                },
            }
        })
    </script>
</body>
</html>
